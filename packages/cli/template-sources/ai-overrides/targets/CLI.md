# CLI Usage Guidelines

## AI WORKFLOW (REQUIRED)
1) Summarize 3-6 rules from this file before proposing changes.
2) STOP if you recommend modifying CLI internals or template sources.

## SCOPE
- Using hai3 CLI commands in user projects.
- Understanding project structure generated by CLI.
- Running validation commands.

## CRITICAL RULES
- Use hai3 CLI for scaffolding (create, update, screenset).
- Project structure follows src/ organization (screensets, themes, uikit, icons).
- Validation via npm run type-check, lint, arch:check, arch:deps.
- NO direct template modifications; use hai3 update for updates.

## AVAILABLE COMMANDS

| Command | Purpose |
|---------|---------|
| hai3 create <name> | Create new HAI3 project |
| hai3 update | Update project templates and configs |
| hai3 screenset create <id> | Create new screenset from template |
| hai3 screenset copy <source> <target> | Copy and transform screenset IDs |

## PROJECT STRUCTURE
- src/screensets/: Application screensets with screens, state, i18n.
- src/themes/: Theme configurations and token overrides.
- src/uikit/: Local UI component customizations.
- src/icons/: Custom icon components.
- .ai/: AI assistant guidelines and commands.

## SCREENSET CONVENTIONS
- REQUIRED: Screenset IDs use template literals in event names, slice keys, icon IDs.
- REQUIRED: Event pattern: ${SCREENSET_ID}/${DOMAIN_ID}/eventName.
- REQUIRED: Slice key pattern: ${SCREENSET_ID}/domain.
- REQUIRED: Icon ID pattern: ${SCREENSET_ID}:iconName.
- REQUIRED: Translation key pattern: screenset.${ID}:key or screen.${ID}.${SCREEN}:key.

## UPDATE COMMAND
- REQUIRED: hai3 update syncs templates selectively.
- REQUIRED: User content in src/screensets/ and src/themes/ is preserved.
- FORBIDDEN: Manual template file edits (use update command instead).

## VALIDATION WORKFLOW
- REQUIRED: npm run type-check must pass.
- REQUIRED: npm run lint must pass.
- REQUIRED: npm run arch:check must pass (architecture rules).
- REQUIRED: npm run arch:deps must pass (dependency rules).
- REQUIRED: npm run dev starts without errors.

## STOP CONDITIONS
- Modifying CLI package internals.
- Editing template source files directly.
- Bypassing CLI commands for manual scaffolding.
- Recommending changes to copy-templates.ts or preset hierarchy.

## PRE-DIFF CHECKLIST
- [ ] Using hai3 CLI commands for scaffolding.
- [ ] Following src/ project structure.
- [ ] Screenset ID conventions with template literals.
- [ ] All validation commands pass.
- [ ] No manual template modifications.
